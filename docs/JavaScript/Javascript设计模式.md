# JavaScript 常见设计模式



### 惰性单例模式  

惰性单例模式指的是需要的时候才创建对象实例。

```js
Singleton.getInstance = (function () {
  var instance = null;
  return function (name) {
    if (!instance) {
      instance = new Singleton(name);
    }
    return instance;
  };
})();
```



### 策略模式

策略模式是一种常用且有效的设计模式。

优点：

-  策略模式利用组合、委托和多态等技术和思想，可以有效地避免多重条件选择语句。
-  策略模式提供了对开放—封闭原则的完美支持，将算法封装在独立的strategy中，使得它们易于切换，易于理解，易于扩展。
-  策略模式中的算法也可以复用在系统的其他地方，从而避免许多重复的复制粘贴工作。
-  在策略模式中利用组合和委托来让Context拥有执行算法的能力，这也是继承的一种更轻便的替代方案。

缺点：

- 会在程序中增加许多策略类或者策略对象





面向对象设计原则——单一职责原则： 指一个类（通常包括对象和函数等）而言，应该仅有一个引起它变化的原因。

### 代理模式

代理对象和本体是一致的，代理接手的请求的过程对用户来说是透明的，用户并不清楚代理和本体的区别

- 用户可以放心地请求代理，他只关心是否能得到想要的结果；
- 在任何使用本体的地方都可以替换成代理；



### 迭代器模式

```js
each
```



### 发布-订阅模式（观察者模式）

定于对象间的一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖他的对象都将得到通知。



###  命令模式

- 组合模式

  组合模式要求组合对象和叶对象拥有相同的接口，且一对叶组合对象的操作必须具有一致性

- 双向映射关系
  比如一个子节点可能会在多个父节点中出现，在这种复合情况下，就必须给父节点和子节点建立双向映射关系；

- 用职责链模式提高组合模式性能
  比如一个复杂的树结构，节点很多，遍历整棵树性能表现不佳，那么可以在父子之间创建职责链；职责链模式的前提是需要开发者手动设置链条，这样可以实现子节点顺着链条找到对应的对象，反之，父节点也可以找到子节点；

----

参考文献:

[1]. JavaScripts设计模式与开发实践